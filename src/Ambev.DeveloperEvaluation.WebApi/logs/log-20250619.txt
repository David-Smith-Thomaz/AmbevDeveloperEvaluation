2025-06-19 09:54:50.941 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 09:54:51.018 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 09:54:51.056 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 09:54:51.058 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 09:54:51.060 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 09:54:51.061 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 09:56:23.331 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 09:59:07.619 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 09:59:07.697 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 09:59:07.737 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 09:59:07.739 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 09:59:07.740 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 09:59:07.741 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 09:59:46.274 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 10:03:11.010 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 10:03:11.078 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 10:03:11.114 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 10:03:11.117 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 10:03:11.117 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 10:03:11.118 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 10:13:46.648 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 10:13:58.980 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 10:13:59.051 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 10:13:59.090 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 10:13:59.092 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 10:13:59.093 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 10:13:59.094 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 10:14:17.656 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger - null null
2025-06-19 10:14:17.681 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger - 301 0 null 25.6876ms
2025-06-19 10:14:17.688 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/index.html - null null
2025-06-19 10:14:17.725 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/index.html - 200 null text/html;charset=utf-8 36.9282ms
2025-06-19 10:14:17.740 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui.css - null null
2025-06-19 10:14:17.743 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/index.css - null null
2025-06-19 10:14:17.743 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui-bundle.js - null null
2025-06-19 10:14:17.743 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui-standalone-preset.js - null null
2025-06-19 10:14:17.743 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/index.js - null null
2025-06-19 10:14:17.749 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-06-19 10:14:17.752 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/index.js - 200 null application/javascript;charset=utf-8 8.2841ms
2025-06-19 10:14:17.752 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-06-19 10:14:17.752 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-06-19 10:14:17.753 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/index.css - 200 202 text/css 9.5303ms
2025-06-19 10:14:17.755 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-06-19 10:14:17.756 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui.css - 200 152034 text/css 16.0951ms
2025-06-19 10:14:17.757 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui-standalone-preset.js - 200 230293 text/javascript 13.186ms
2025-06-19 10:14:17.760 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/swagger-ui-bundle.js - 200 1452753 text/javascript 16.3681ms
2025-06-19 10:14:17.931 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/v1/swagger.json - null null
2025-06-19 10:14:17.945 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET http://localhost:5119/swagger/favicon-32x32.png - null null
2025-06-19 10:14:17.948 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-19 10:14:17.949 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/favicon-32x32.png - 200 628 image/png 3.9958ms
2025-06-19 10:14:18.029 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET http://localhost:5119/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.3564ms
2025-06-19 10:15:02.349 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 POST http://localhost:5119/api/sales - application/json 646
2025-06-19 10:15:02.369 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 10:15:02.382 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CreateSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSale(Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleRequest) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2025-06-19 10:15:03.195 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?' (DbType = Decimal), @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime), @p13='?' (DbType = Decimal), @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = Decimal), @p21='?' (DbType = DateTime), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTime), @p24='?' (DbType = Decimal), @p25='?' (DbType = Boolean), @p26='?', @p27='?', @p28='?' (DbType = Int32), @p29='?' (DbType = Guid), @p30='?' (DbType = Decimal), @p31='?' (DbType = Decimal), @p32='?' (DbType = DateTime), @p33='?' (DbType = Guid), @p34='?' (DbType = DateTime), @p35='?' (DbType = Decimal), @p36='?' (DbType = Boolean), @p37='?', @p38='?', @p39='?' (DbType = Int32), @p40='?' (DbType = Guid), @p41='?' (DbType = Decimal), @p42='?' (DbType = Decimal), @p43='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sales" ("Id", "BranchId", "BranchName", "CreatedAt", "CustomerId", "CustomerName", "SaleDate", "SaleNumber", "Status", "TotalAmount", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43)
RETURNING "RowVersion";
2025-06-19 10:15:03.238 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedAtActionResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleResponse'.
2025-06-19 10:15:03.254 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) in 867.668ms
2025-06-19 10:15:03.256 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 10:15:03.261 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 POST http://localhost:5119/api/sales - 201 null application/json; charset=utf-8 912.4605ms
2025-06-19 10:15:29.767 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 10:20:49.108 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 10:20:49.178 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 10:20:49.217 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 10:20:49.219 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 10:20:49.219 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 10:20:49.220 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 10:22:13.250 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 10:22:17.626 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 10:22:17.706 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 10:22:17.762 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2025-06-19 10:22:17.763 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 10:22:17.765 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 10:22:17.766 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 10:22:17.766 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 10:22:23.248 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2025-06-19 10:22:23.303 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 55.6059ms
2025-06-19 10:22:23.322 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2025-06-19 10:22:23.326 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 4.2524ms
2025-06-19 10:22:23.437 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2025-06-19 10:22:23.447 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/favicon-32x32.png - null null
2025-06-19 10:22:23.453 -03:00 [INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-19 10:22:23.454 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/favicon-32x32.png - 200 628 image/png 7.2955ms
2025-06-19 10:22:23.535 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.1816ms
2025-06-19 10:22:32.271 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - null null
2025-06-19 10:22:32.290 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 10:22:32.304 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ListSales", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListSales(Int32, Int32, System.String, System.String) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2025-06-19 10:22:33.095 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (30ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."BranchName", t."CreatedAt", t."CustomerId", t."CustomerName", t."RowVersion", t."SaleDate", t."SaleNumber", t."Status", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."Discount", s0."IsCancelled", s0."ProductId", s0."ProductName", s0."Quantity", s0."RowVersion", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."BranchName", s."CreatedAt", s."CustomerId", s."CustomerName", s."RowVersion", s."SaleDate", s."SaleNumber", s."Status", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    ORDER BY s."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS t
LEFT JOIN "SaleItems" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."CreatedAt" DESC, t."Id"
2025-06-19 10:22:33.190 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Ambev.DeveloperEvaluation.WebApi.Features.Sales.GetSaleById.GetSaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-19 10:22:33.215 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi) in 906.7822ms
2025-06-19 10:22:33.217 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 10:22:33.223 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 952.4133ms
2025-06-19 10:40:23.065 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2025-06-19 10:40:23.069 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 4.5783ms
2025-06-19 10:40:23.090 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2025-06-19 10:40:23.095 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 5.0015ms
2025-06-19 10:40:23.191 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2025-06-19 10:40:23.218 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.0875ms
2025-06-19 10:40:33.385 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2025-06-19 10:40:33.389 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 4.6347ms
2025-06-19 10:40:33.411 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2025-06-19 10:40:33.420 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 8.9396ms
2025-06-19 10:40:33.570 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2025-06-19 10:40:33.593 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.7133ms
2025-06-19 10:42:36.334 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 14:55:43.662 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 14:55:43.740 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 14:55:43.784 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 14:55:43.785 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 14:55:43.786 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 14:55:43.786 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 14:55:46.383 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
2025-06-19 14:55:50.101 -03:00 [INF] Microsoft.Extensions.Diagnostics.HealthChecks.HealthCheckService Health Check enabled at: '/health'
2025-06-19 14:55:50.179 -03:00 [INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\david\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-19 14:55:50.242 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:7181
2025-06-19 14:55:50.244 -03:00 [INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:5119
2025-06-19 14:55:50.244 -03:00 [INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down.
2025-06-19 14:55:50.245 -03:00 [INF] Microsoft.Hosting.Lifetime Hosting environment: Development
2025-06-19 14:55:50.245 -03:00 [INF] Microsoft.Hosting.Lifetime Content root path: C:\Projects\AmbevDeveloperEvaluation\src\Ambev.DeveloperEvaluation.WebApi
2025-06-19 14:56:01.446 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.html - null null
2025-06-19 14:56:01.499 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.html - 200 null text/html;charset=utf-8 53.133ms
2025-06-19 14:56:01.523 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/index.js - null null
2025-06-19 14:56:01.527 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/index.js - 200 null application/javascript;charset=utf-8 4.1755ms
2025-06-19 14:56:01.658 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - null null
2025-06-19 14:56:01.761 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.3859ms
2025-06-19 14:56:07.713 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - null null
2025-06-19 14:56:07.731 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:07.746 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ListSales", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListSales(Int32, Int32, System.String, System.String) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2025-06-19 14:56:08.546 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (29ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."BranchName", t."CreatedAt", t."CustomerId", t."CustomerName", t."RowVersion", t."SaleDate", t."SaleNumber", t."Status", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."Discount", s0."IsCancelled", s0."ProductId", s0."ProductName", s0."Quantity", s0."RowVersion", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."BranchName", s."CreatedAt", s."CustomerId", s."CustomerName", s."RowVersion", s."SaleDate", s."SaleNumber", s."Status", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    ORDER BY s."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS t
LEFT JOIN "SaleItems" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."CreatedAt" DESC, t."Id"
2025-06-19 14:56:08.647 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Ambev.DeveloperEvaluation.WebApi.Features.Sales.GetSaleById.GetSaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-19 14:56:08.671 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi) in 922.0287ms
2025-06-19 14:56:08.675 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:08.681 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 967.5928ms
2025-06-19 14:56:33.513 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 POST https://localhost:7181/api/sales - application/json 646
2025-06-19 14:56:33.517 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:33.522 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "CreateSale", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSale(Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleRequest) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2025-06-19 14:56:33.675 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?' (DbType = Decimal), @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid), @p12='?' (DbType = DateTime), @p13='?' (DbType = Decimal), @p14='?' (DbType = Boolean), @p15='?', @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Guid), @p19='?' (DbType = Decimal), @p20='?' (DbType = Decimal), @p21='?' (DbType = DateTime), @p22='?' (DbType = Guid), @p23='?' (DbType = DateTime), @p24='?' (DbType = Decimal), @p25='?' (DbType = Boolean), @p26='?', @p27='?', @p28='?' (DbType = Int32), @p29='?' (DbType = Guid), @p30='?' (DbType = Decimal), @p31='?' (DbType = Decimal), @p32='?' (DbType = DateTime), @p33='?' (DbType = Guid), @p34='?' (DbType = DateTime), @p35='?' (DbType = Decimal), @p36='?' (DbType = Boolean), @p37='?', @p38='?', @p39='?' (DbType = Int32), @p40='?' (DbType = Guid), @p41='?' (DbType = Decimal), @p42='?' (DbType = Decimal), @p43='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Sales" ("Id", "BranchId", "BranchName", "CreatedAt", "CustomerId", "CustomerName", "SaleDate", "SaleNumber", "Status", "TotalAmount", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "RowVersion";
INSERT INTO "SaleItems" ("Id", "CreatedAt", "Discount", "IsCancelled", "ProductId", "ProductName", "Quantity", "SaleId", "TotalAmount", "UnitPrice", "UpdatedAt")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43)
RETURNING "RowVersion";
2025-06-19 14:56:33.702 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing CreatedAtActionResult, writing value of type 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.CreateSale.CreateSaleResponse'.
2025-06-19 14:56:33.711 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi) in 187.2485ms
2025-06-19 14:56:33.713 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.CreateSale (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:33.714 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 POST https://localhost:7181/api/sales - 201 null application/json; charset=utf-8 201.455ms
2025-06-19 14:56:50.712 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - null null
2025-06-19 14:56:50.716 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:50.717 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ListSales", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListSales(Int32, Int32, System.String, System.String) on controller Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController (Ambev.DeveloperEvaluation.WebApi).
2025-06-19 14:56:50.766 -03:00 [INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BranchId", t."BranchName", t."CreatedAt", t."CustomerId", t."CustomerName", t."RowVersion", t."SaleDate", t."SaleNumber", t."Status", t."TotalAmount", t."UpdatedAt", s0."Id", s0."CreatedAt", s0."Discount", s0."IsCancelled", s0."ProductId", s0."ProductName", s0."Quantity", s0."RowVersion", s0."SaleId", s0."TotalAmount", s0."UnitPrice", s0."UpdatedAt"
FROM (
    SELECT s."Id", s."BranchId", s."BranchName", s."CreatedAt", s."CustomerId", s."CustomerName", s."RowVersion", s."SaleDate", s."SaleNumber", s."Status", s."TotalAmount", s."UpdatedAt"
    FROM "Sales" AS s
    ORDER BY s."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS t
LEFT JOIN "SaleItems" AS s0 ON t."Id" = s0."SaleId"
ORDER BY t."CreatedAt" DESC, t."Id"
2025-06-19 14:56:50.770 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Ambev.DeveloperEvaluation.WebApi.Features.Sales.GetSaleById.GetSaleResponse, Ambev.DeveloperEvaluation.WebApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-19 14:56:50.772 -03:00 [INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi) in 53.0625ms
2025-06-19 14:56:50.773 -03:00 [INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Ambev.DeveloperEvaluation.WebApi.Features.Sales.SalesController.ListSales (Ambev.DeveloperEvaluation.WebApi)'
2025-06-19 14:56:50.775 -03:00 [INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:7181/api/sales?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 62.638ms
2025-06-19 15:30:41.246 -03:00 [INF] Microsoft.Hosting.Lifetime Application is shutting down...
